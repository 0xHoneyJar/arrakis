{
  "verdict": "CHANGES_REQUIRED",
  "summary": "This plan is close, but it has a few concrete blockers (event type count mismatch, migration ordering inconsistency, and missing/incorrect dependencies around config seeding and event emission) that could cause implementation or CI to fail mid-cycle.",
  "blocking_issues": [
    {
      "location": "Sprint 1 / Task 1.2 (economic-events.ts)",
      "issue": "Acceptance criteria says “10 new event types” but the description lists 11 event types (includes AgentProposalRejected in addition to the 10 named).",
      "why_blocking": "This will cause immediate confusion and likely a failing test/compile expectation (vocabulary count 39 vs 40) and downstream tasks depending on the union will diverge.",
      "fix": "Decide the authoritative list and make it consistent everywhere: update Task 1.2 to either (a) add 11 types and update counts (29+11=40), or (b) remove the extra type from the list and keep 10. Also ensure Sprint 6/8 governance flows emit/expect the same set."
    },
    {
      "location": "Appendix B (Migration ordering) + Sprint sequencing",
      "issue": "Migration ordering is stated as 056 → 057 → 058 → 059 → 060, but Sprint 1 defines 059 and claims it can run in any order; also the ordering list contradicts the sprint execution order (Sprint 1 runs before Sprint 2).",
      "why_blocking": "If your migration runner enforces numeric ordering (common), 059 will run after 056–058 regardless of sprint, which can break Sprint 1 assumptions/tests that expect deprecated_at to exist right after Sprint 1. Conversely, if you run “only this sprint’s migrations”, you risk environments diverging from CI/prod ordering.",
      "fix": "Make migration execution strategy explicit and align acceptance criteria: (1) state that all migrations run strictly by number in all envs, and adjust Sprint 1 tests to not assume 059 has run yet; or (2) renumber 059 to be earlier than 056 if Sprint 1 truly requires it; or (3) remove any Sprint 1 dependency on 059 and treat it as non-blocking additive migration."
    },
    {
      "location": "Sprint 3 / Task 3.3 vs Sprint 6 / Task 6.2 (config params + seeding)",
      "issue": "Sprint 3 adds transfer governance params to CONFIG_SCHEMA/FALLBACKS, while Sprint 6 migration 060 also claims to add/seed those same transfer params as part of “10 parameters total”.",
      "why_blocking": "This creates a real risk of duplicate definitions, conflicting defaults, or migration/test failures depending on how CONFIG_SCHEMA is validated and how seeding handles existing keys. It also muddles the dependency: Sprint 3 needs the params available before Sprint 6 exists.",
      "fix": "Choose one source of truth and sequence it: either (A) move transfer.* param additions entirely into Sprint 3 (schema + fallbacks) and have migration 060 seed only governance.* params not needed earlier; or (B) move all param additions + seeding into Sprint 3 (create a new migration earlier than 060) so Sprint 3 can rely on seeded values. Update Task 6.2 acceptance criteria to exclude transfer.* if already introduced."
    },
    {
      "location": "Sprint 4 / Task 4.2 (bindTBA emits TbaBound event) and Sprint 5 / Task 5.3 (deposit bridge emits TbaDeposit* events)",
      "issue": "Tasks say they emit events “via EconomicEventEmitter”, but Sprint 1 establishes EventConsolidationAdapter as the dual-write authoritative path and later tasks (Sprint 3.4) explicitly require using emitInTransaction(). Sprint 4/5 acceptance criteria do not require the adapter/transactional emission.",
      "why_blocking": "You can end up with partial event coverage (only economic_events or only billing_events) and Sprint 8.4 dual-write correctness will fail. Also, non-transactional emission can create orphan events if DB writes roll back.",
      "fix": "Make on-adapter, in-transaction emission mandatory in Sprint 4/5 acceptance criteria: require EventConsolidationAdapter.emitInTransaction(tx, ...) for TbaBound and all deposit bridge events, and ensure the bind/bridge operations run inside a DB transaction that includes both state change + event emission."
    },
    {
      "location": "Sprint 2 / Task 2.3 (lot-split algorithm) acceptance criteria",
      "issue": "It requires reducing sender lot original_micro and available_micro, but does not specify how reserved/consumed are handled (or that they must remain unchanged) and simultaneously asserts an invariant involving reserved/consumed.",
      "why_blocking": "If reserved/consumed exist in the schema (they’re referenced), an implementer can easily violate invariants or accidentally allow available to go negative during multi-lot splits. This is conservation-critical and will surface as reconciliation failures in Sprint 7/8.",
      "fix": "Tighten acceptance criteria to be mechanically testable: explicitly state reserved_micro and consumed_micro are unchanged by transfer; enforce available_micro never negative; and define the exact invariant per lot before/after split. Add a unit test that includes non-zero reserved/consumed lots (if supported) or explicitly state they are always zero in this system."
    },
    {
      "location": "Sprint 8 / Task 8.1 (E2E sovereignty proof) acceptance criteria",
      "issue": "It asserts “All economic events present in outbox with correct types and ordering”, but the sprint plan does not include any task that builds/extends an outbox adapter or defines the ordering key/contract for outbox consumption in this cycle (beyond EventConsolidationAdapter dual-write).",
      "why_blocking": "If the outbox mechanism is not already present and compatible with the new event types, this E2E test will be impossible to implement or will fail nondeterministically on ordering.",
      "fix": "Add an explicit task (likely Sprint 1 or Sprint 8) to confirm/extend the outbox pipeline for the new EconomicEventType vocabulary and define ordering (e.g., monotonic id/created_at within a transaction). If outbox already exists from prior cycles, add acceptance criteria referencing the existing component and add a small integration test that proves new event types are exported."
    }
  ],
  "question": "",
  "iteration": 1
}
